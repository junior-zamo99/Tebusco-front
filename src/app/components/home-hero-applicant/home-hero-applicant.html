<section class="relative w-full rounded-2xl bg-gradient-to-r from-blue-500 to-blue-600 shadow-xl text-white my-4 overflow-hidden">

  <div class="absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full -mr-16 -mt-32 blur-3xl pointer-events-none"></div>
  <div class="absolute bottom-0 left-0 w-40 h-40 bg-white/5 rounded-full -ml-10 -mb-10 blur-2xl pointer-events-none"></div>

  <div class="relative z-10 flex flex-col md:flex-row items-center justify-between p-6 gap-6">

    <div class="text-center md:text-left flex flex-col items-center md:items-start w-full md:w-auto">

      <button
        (click)="openAddressModal.emit()"
        class="group mb-4 inline-flex items-center gap-3 px-4 py-2 rounded-xl backdrop-blur-md transition-all border max-w-full"
        [ngClass]="currentAddress
          ? 'bg-white/20 border-white/30 hover:bg-white/30'
          : 'bg-white/10 border-white/20 hover:bg-white/20 animate-pulse'"
      >
        <div class="shrink-0 w-8 h-8 rounded-full bg-white/20 flex items-center justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-white" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" />
          </svg>
        </div>

        <div class="flex flex-col items-start leading-tight text-left min-w-0 flex-1">
          <span class="text-xs font-bold tracking-wide uppercase text-blue-50 mb-0.5">
            {{ getAddressLabel() }}
          </span>

          <span *ngIf="currentAddress" class="text-xs md:text-sm font-medium text-white truncate w-full max-w-[200px] md:max-w-[350px] block" title="{{ getFullAddress() }}">
            {{ getFullAddress() }}
          </span>

          <span *ngIf="!currentAddress" class="text-xs font-medium text-white opacity-90">
            Toca para configurar
          </span>
        </div>

        <div class="shrink-0 ml-1 opacity-60 group-hover:opacity-100 transition-opacity">
           <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
          </svg>
        </div>
      </button>

      <h1 class="text-xl md:text-2xl font-bold mb-1 tracking-tight">
        Hola, {{ userName }}
      </h1>
      <p class="text-blue-100 text-xs md:text-sm font-medium">
        ¿Qué servicio necesitas solucionar hoy?
      </p>
    </div>

    <div class="flex gap-3 w-full md:w-auto">
      <button
        (click)="createRequest.emit()"
        class="flex-1 md:flex-none bg-white text-blue-600 hover:bg-blue-50 font-bold py-2.5 px-6 rounded-xl shadow-lg shadow-blue-900/10 transition-all text-xs md:text-sm flex items-center justify-center gap-2 whitespace-nowrap transform hover:-translate-y-0.5"
      >
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
        </svg>
        Publicar Solicitud
      </button>

      <button
        routerLink="/categories"
        class="flex-1 md:flex-none bg-blue-700/30 hover:bg-blue-700/50 border border-white/20 text-white font-semibold py-2.5 px-6 rounded-xl transition-all text-xs md:text-sm flex items-center justify-center gap-2 whitespace-nowrap backdrop-blur-sm"
      >
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
        </svg>
        Buscar
      </button>
    </div>
  </div>
</section>
