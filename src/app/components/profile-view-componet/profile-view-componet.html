<div class="bg-[#161b26] rounded-xl border border-slate-800 overflow-hidden">

  <div class="p-6 border-b border-slate-800/50">
    <h3 class="text-white text-base font-bold flex items-center gap-2">
      <i class="fas fa-eye text-indigo-500"></i> Historial de Visitas
    </h3>
    <p class="text-xs text-slate-500 mt-1">
      Usuarios que han visualizado tu perfil recientemente.
    </p>
  </div>

  <div *ngIf="isLoading" class="p-8 flex flex-col items-center justify-center gap-3">
    <div class="w-6 h-6 border-2 border-indigo-500 border-t-transparent rounded-full animate-spin"></div>
    <span class="text-xs text-slate-500">Cargando datos...</span>
  </div>

  <div *ngIf="errorMessage && !isLoading" class="p-6 text-center">
    <p class="text-red-400 text-xs bg-red-400/10 p-3 rounded-lg inline-block">{{ errorMessage }}</p>
  </div>

  <div *ngIf="!isLoading && !errorMessage && viewers.length > 0" class="overflow-x-auto">
    <table class="w-full text-left border-collapse">
      <thead>
        <tr class="bg-[#11161f] text-slate-400 text-[11px] uppercase tracking-wider border-b border-slate-800">
          <th class="px-6 py-3 font-semibold">Solicitante</th>
          <th class="px-6 py-3 font-semibold">Email</th>
          <th class="px-6 py-3 font-semibold text-center">Frecuencia</th>
          <th class="px-6 py-3 font-semibold text-right">Última Visita</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-slate-800">
        <tr *ngFor="let viewer of viewers" class="hover:bg-[#1f2937] transition-colors duration-150">
          <td class="px-6 py-4">
            <div class="flex items-center gap-3">
              <div class="w-8 h-8 rounded-full bg-indigo-900/50 text-indigo-300 flex items-center justify-center text-xs font-bold border border-indigo-500/20">
                {{ viewer.applicantName.charAt(0) | uppercase }}
              </div>
              <span class="text-slate-300 text-xs font-medium">{{ viewer.applicantName }}</span>
            </div>
          </td>
          <td class="px-6 py-4 text-xs text-slate-400">
            {{ viewer.applicantEmail }}
          </td>
          <td class="px-6 py-4 text-center">
            <span class="bg-[#1e3a8a]/30 text-blue-300 border border-blue-500/20 px-2.5 py-0.5 rounded-full text-[10px] font-bold">
              {{ viewer.viewCount }} visitas
            </span>
          </td>
          <td class="px-6 py-4 text-right text-xs text-slate-500">
            {{ viewer.lastViewedAt | date:'dd MMM, h:mm a' }}
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div *ngIf="!isLoading && !errorMessage && viewers.length === 0" class="p-12 text-center">
    <div class="w-12 h-12 bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-3 text-slate-600">
      <i class="fas fa-eye-slash text-xl"></i>
    </div>
    <h4 class="text-slate-300 text-sm font-medium">Aún no tienes visitas</h4>
    <p class="text-xs text-slate-500 mt-1 max-w-xs mx-auto">
      Optimiza tu perfil y categorías para aparecer en más búsquedas.
    </p>
  </div>
</div>
