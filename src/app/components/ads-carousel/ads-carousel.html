<div class="my-8" *ngIf="!isLoading && ads.length > 0">

  <div class="flex items-center justify-between mb-4 px-1">
    <h3 class="text-lg font-bold text-slate-800 dark:text-white">Novedades y Promociones</h3>

    <div class="flex gap-2" *ngIf="ads.length > itemsPerView">
      <button
        (click)="prev()"
        class="p-1.5 rounded-full border border-slate-200 dark:border-white/10 text-slate-500 hover:bg-slate-100 dark:text-white/70 dark:hover:bg-white/10 dark:hover:text-yellow-400 transition-colors cursor-pointer">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
        </svg>
      </button>
      <button
        (click)="next()"
        class="p-1.5 rounded-full border border-slate-200 dark:border-white/10 text-slate-500 hover:bg-slate-100 dark:text-white/70 dark:hover:bg-white/10 dark:hover:text-yellow-400 transition-colors cursor-pointer">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
        </svg>
      </button>
    </div>
  </div>

  <div
    class="relative w-full overflow-hidden"
    (mouseenter)="stopAutoPlay()"
    (mouseleave)="startAutoPlay()"
  >
    <div
      class="flex transition-transform duration-500 ease-out"
      [style.transform]="'translateX(-' + (currentIndex * (100 / itemsPerView)) + '%)'"
    >

      <div
        *ngFor="let ad of ads"
        class="flex-shrink-0 px-2 box-border"
        [style.width.%]="100 / itemsPerView"
      >
        <div
            (click)="onAdClick(ad)"
            class="relative w-full h-40 md:h-48 rounded-xl overflow-hidden shadow-sm hover:shadow-lg transition-all duration-300 cursor-pointer border border-slate-200 dark:border-white/10 group bg-slate-900"
            [title]="ad.companyName"
        >

            <img
             [src]="getDetailUrl(ad.imageUrl)"
              [alt]="ad.companyName"
              class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110 opacity-90 group-hover:opacity-100"
            >

            <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent flex items-end p-4">
               <div class="flex flex-col w-full">
                   <span class="text-white text-sm md:text-base font-bold tracking-wide drop-shadow-md truncate mb-0.5">
                     {{ ad.companyName }}
                   </span>

                   <div class="flex items-center text-xs font-medium text-yellow-400">

                        <ng-container *ngIf="ad.actionType === ActionType.WHATSAPP">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 mr-1.5" viewBox="0 0 24 24" fill="currentColor">
                                <path fill-rule="evenodd" d="M1.5 4.5a3 3 0 013-3h1.372c.86 0 1.61.586 1.819 1.42l1.105 4.423a1.875 1.875 0 01-.694 1.955l-1.293.97c-.135.101-.164.249-.126.352a11.285 11.285 0 006.697 6.697c.103.038.25.009.352-.126l.97-1.293a1.875 1.875 0 011.955-.694l4.423 1.105c.834.209 1.42.959 1.42 1.82V19.5a3 3 0 01-3 3h-2.25C8.552 22.5 1.5 15.448 1.5 5.25V4.5z" clip-rule="evenodd" />
                            </svg>
                            <span>WhatsApp</span>
                        </ng-container>

                        <ng-container *ngIf="ad.actionType === ActionType.WEB_URL">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 mr-1.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9" />
                            </svg>
                            <span>Visitar web</span>
                        </ng-container>

                        <ng-container *ngIf="ad.actionType === ActionType.PHONE_CALL">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 mr-1.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                            </svg>
                            <span>Llamar ahora</span>
                        </ng-container>

                   </div>
                   </div>
            </div>
            </div>
      </div>
      </div>
  </div>
</div>
