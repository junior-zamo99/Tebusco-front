<div class="min-h-screen bg-background flex items-center justify-center py-6 px-4 sm:px-6 lg:px-8">
  <div class="max-w-3xl w-full space-y-4">

    <div class="text-center backdrop-blur-sm bg-white/5 rounded-2xl p-4 border border-white/10">
      <a routerLink="/" class="text-2xl font-extrabold text-primary hover:text-primary-light transition-colors duration-300">
        <img src="/assets/img/logo/logo.png" alt="Logo TEBUSCO" class="mx-auto w-auto h-12 object-contain">
      </a>
      <h2 class="text-2xl font-bold bg-gradient-to-r from-white to-gray-300 bg-clip-text text-transparent mt-2">
        Crear Cuenta
      </h2>
    </div>

    <div *ngIf="errorMessage()"
         class="bg-red-500/10 backdrop-blur-sm border border-red-500/50 text-red-400 px-4 py-3 rounded-xl flex items-center gap-3 animate-shake text-sm">
      <svg class="w-5 h-5 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
      <span>{{ errorMessage() }}</span>
    </div>

    <div class="backdrop-blur-xl bg-white/5 rounded-3xl p-6 border border-white/10 shadow-2xl">
      <form (ngSubmit)="onSubmit()" class="space-y-4">

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div class="form-group">
            <label for="name" class="block text-xs font-semibold text-gray-300 mb-1">Nombre *</label>
            <input type="text" id="name" name="name" [(ngModel)]="formData.name"
                   class="w-full px-4 py-2.5 bg-gray-800/50 border border-gray-700 rounded-xl text-sm text-white focus:outline-none focus:ring-2 focus:ring-primary transition-all placeholder-gray-500"
                   placeholder="Ej: Juan" required>
          </div>
          <div class="form-group">
            <label for="lastName" class="block text-xs font-semibold text-gray-300 mb-1">Apellido *</label>
            <input type="text" id="lastName" name="lastName" [(ngModel)]="formData.lastName"
                   class="w-full px-4 py-2.5 bg-gray-800/50 border border-gray-700 rounded-xl text-sm text-white focus:outline-none focus:ring-2 focus:ring-primary transition-all placeholder-gray-500"
                   placeholder="Ej: Pérez" required>
          </div>
        </div>

        <div class="form-group">
          <label for="email" class="block text-xs font-semibold text-gray-300 mb-1">Email *</label>
          <input type="email" id="email" name="email" [(ngModel)]="formData.email"
                 class="w-full px-4 py-2.5 bg-gray-800/50 border border-gray-700 rounded-xl text-sm text-white focus:outline-none focus:ring-2 focus:ring-primary transition-all placeholder-gray-500"
                 placeholder="ejemplo@correo.com" required>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div class="form-group">
            <label for="ci" class="block text-xs font-semibold text-gray-300 mb-1">CI *</label>
            <input type="text" id="ci" name="ci" [(ngModel)]="formData.ci"
                   class="w-full px-4 py-2.5 bg-gray-800/50 border border-gray-700 rounded-xl text-sm text-white focus:outline-none focus:ring-2 focus:ring-primary transition-all placeholder-gray-500"
                   placeholder="1234567" required>
          </div>
          <div class="form-group">
            <label for="phone" class="block text-xs font-semibold text-gray-300 mb-1">Teléfono *</label>
            <input type="tel" id="phone" name="phone" [(ngModel)]="formData.phone"
                   class="w-full px-4 py-2.5 bg-gray-800/50 border border-gray-700 rounded-xl text-sm text-white focus:outline-none focus:ring-2 focus:ring-primary transition-all placeholder-gray-500"
                   placeholder="70123456" required>
          </div>
        </div>

        <div class="form-group">
          <label for="sex" class="block text-xs font-semibold text-gray-300 mb-1">Género</label>
          <select id="sex" name="sex" [(ngModel)]="formData.sex"
                  class="w-full px-4 py-2.5 bg-gray-800/50 border border-gray-700 rounded-xl text-sm text-white focus:outline-none focus:ring-2 focus:ring-primary transition-all appearance-none cursor-pointer">
            <option value="" disabled selected class="bg-gray-900">Selecciona una opción</option>
            <option value="male" class="bg-gray-900">Masculino</option>
            <option value="female" class="bg-gray-900">Femenino</option>
            <option value="other" class="bg-gray-900">Otro</option>
          </select>
        </div>

        <div class="bg-gray-800/30 p-4 rounded-xl border border-gray-700/50 grid grid-cols-1 md:grid-cols-2 gap-4">
          <div class="form-group">
            <label for="country" class="block text-xs font-semibold text-gray-300 mb-1">País *</label>
            <select id="country" name="country" [(ngModel)]="selectedCountryId" (change)="onCountryChange()"
                    class="w-full px-4 py-2.5 bg-gray-800/50 border border-gray-700 rounded-xl text-sm text-white focus:outline-none focus:ring-2 focus:ring-primary transition-all appearance-none cursor-pointer"
                    required>
              <option [ngValue]="null" class="bg-gray-900">Selecciona un país</option>
              <option *ngFor="let country of countries" [ngValue]="country.id" class="bg-gray-900">
                {{ country.name }}
              </option>
            </select>
          </div>

          <div class="form-group">
            <label for="city" class="block text-xs font-semibold text-gray-300 mb-1">Ciudad *</label>
            <select id="city" name="city" [(ngModel)]="selectedCityId"
                    [disabled]="!selectedCountryId || cities.length === 0"
                    class="w-full px-4 py-2.5 bg-gray-800/50 border border-gray-700 rounded-xl text-sm text-white focus:outline-none focus:ring-2 focus:ring-primary transition-all appearance-none cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed"
                    required>
              <option [ngValue]="null" class="bg-gray-900">Selecciona una ciudad</option>
              <option *ngFor="let city of cities" [ngValue]="city.id" class="bg-gray-900">
                {{ city.name }}
              </option>
            </select>
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div class="form-group">
            <label for="password" class="block text-xs font-semibold text-gray-300 mb-1">Contraseña *</label>
            <input type="password" id="password" name="password" [(ngModel)]="formData.password"
                   class="w-full px-4 py-2.5 bg-gray-800/50 border border-gray-700 rounded-xl text-sm text-white focus:outline-none focus:ring-2 focus:ring-primary transition-all placeholder-gray-500"
                   placeholder="••••••••" required>
          </div>
          <div class="form-group">
            <label for="confirmPassword" class="block text-xs font-semibold text-gray-300 mb-1">Confirmar *</label>
            <input type="password" id="confirmPassword" name="confirmPassword" [(ngModel)]="formData.confirmPassword"
                   class="w-full px-4 py-2.5 bg-gray-800/50 border border-gray-700 rounded-xl text-sm text-white focus:outline-none focus:ring-2 focus:ring-primary transition-all placeholder-gray-500"
                   placeholder="••••••••" required>
          </div>
        </div>

        <div class="pt-4">
          <button type="submit" [disabled]="isLoading()"
                  class="w-full py-3 bg-gradient-to-r from-primary to-primary-dark text-gray-900 font-bold rounded-xl text-sm hover:scale-[1.02] active:scale-[0.98] transition-all duration-200 shadow-lg shadow-primary/25 disabled:opacity-50 disabled:scale-100 flex items-center justify-center gap-2">
            <span *ngIf="!isLoading()">Crear Cuenta</span>
            <span *ngIf="isLoading()" class="flex items-center gap-2">
               <svg class="animate-spin h-5 w-5 text-gray-900" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                  <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                  <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
               </svg>
               Procesando...
            </span>
          </button>
        </div>

      </form>

      <div class="mt-6 pt-4 border-t border-gray-700/50 text-center">
        <p class="text-gray-400 text-xs">
          ¿Ya tienes una cuenta?
          <a routerLink="/login" class="text-primary hover:text-primary-light font-bold hover:underline ml-1 transition-colors">
            Iniciar Sesión
          </a>
        </p>
      </div>
    </div>

    <div class="text-center text-gray-500 text-[10px] mt-4">
      <p>Al crear una cuenta, aceptas nuestros <a href="#" class="text-primary hover:underline">Términos y Condiciones</a></p>
    </div>

  </div>
</div>
