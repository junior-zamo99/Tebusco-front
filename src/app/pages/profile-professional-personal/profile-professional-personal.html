<div class="min-h-screen bg-[#0B0E14] font-sans text-slate-300 flex text-sm">

  <div *ngIf="loading" class="fixed inset-0 z-50 flex items-center justify-center bg-[#0B0E14]/90 backdrop-blur-sm">
    <div class="flex flex-col items-center gap-3">
      <div class="w-8 h-8 border-2 border-indigo-500 border-t-transparent rounded-full animate-spin"></div>
      <p class="text-indigo-400 font-medium animate-pulse text-xs">Cargando...</p>
    </div>
  </div>

  <aside class="w-56 bg-[#11161F] border-r border-slate-800 hidden lg:flex flex-col fixed h-full z-10">
    <div class="p-5">
      <h2 class="text-lg font-bold text-white mb-0.5">Mi Cuenta</h2>
      <p class="text-[10px] text-slate-500">Gestión de perfil</p>
    </div>

    <nav class="flex-1 px-3 space-y-1">
      <button *ngFor="let tab of tabs"
              (click)="setActiveTab(tab.id)"
              class="w-full flex items-center gap-2.5 px-3 py-2 text-xs font-medium rounded-lg transition-all duration-200 group"
              [ngClass]="activeTab === tab.id
                ? 'bg-indigo-600 text-white shadow-md shadow-indigo-900/20'
                : 'text-slate-400 hover:bg-[#1f2937] hover:text-white'">
        <i [class]="tab.icon" [ngClass]="activeTab === tab.id ? 'text-white' : 'text-slate-500 group-hover:text-white'"></i>
        {{ tab.label }}
      </button>
    </nav>

    <div class="p-3 border-t border-slate-800" *ngIf="professionalData">
      <div class="flex items-center gap-2">
        <div class="w-8 h-8 rounded-full bg-slate-700 overflow-hidden flex-shrink-0">
             <img [src]="getPhotoUrl()" class="w-full h-full object-cover">
        </div>
        <div class="overflow-hidden min-w-0">
          <p class="text-xs font-bold text-white truncate">{{ professionalData.user.name }}</p>
          <p class="text-[10px] text-slate-500 truncate">Profesional</p>
        </div>
      </div>
    </div>
  </aside>

  <main class="flex-1 lg:ml-56 p-4 lg:p-6">
    <div class="lg:hidden mb-4 flex justify-between items-center">
       <h1 class="text-lg font-bold text-white">Mi Perfil</h1>
    </div>

    <div *ngIf="professionalData && !loading" class="max-w-4xl mx-auto">

      <div class="mb-5 border-b border-slate-800/50 pb-2">
        <h2 class="text-xl font-bold text-white">{{ getActiveTabLabel() }}</h2>
        <p class="text-xs text-slate-400">Administra la información de esta sección.</p>
      </div>

      <ng-container [ngSwitch]="activeTab">

        <app-profile-overview *ngSwitchCase="'profile'"
                              [data]="professionalData"
                              (editClicked)="editProfile()">
        </app-profile-overview>

        <app-profile-categories *ngSwitchCase="'categories'"
                                [data]="professionalData"
                                (categoryClicked)="goToCategoryDetail($event)">
        </app-profile-categories>

        <app-profile-view-componet *ngSwitchCase="'stats'"></app-profile-view-componet>

        <app-profile-subscription *ngSwitchCase="'subscription'"
                                  [data]="professionalData">
        </app-profile-subscription>

        <div *ngSwitchCase="'documents'" class="p-6 bg-[#161b26] rounded-xl border border-slate-800 text-center">
            <h3 class="text-white text-sm font-bold">Gestión de Documentos</h3>
            <p class="text-xs text-slate-500 mt-1">Aquí iría el componente de documentos.</p>
         </div>

      </ng-container>

    </div>
  </main>
</div>
